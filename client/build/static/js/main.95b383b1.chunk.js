(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{21:function(e,t,n){e.exports=n(33)},26:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),o=n.n(c),l=(n(26),n(11)),u=n(1),s=n(7),i=n.n(s),d=n(8),p=n(6);function m(){console.log("____noop____")}var g=Object(a.createContext)({token:null,userId:null,login:m,logout:m,isAuthenticated:!1}),b=function(){var e=Object(a.useState)(!1),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),o=Object(p.a)(c,2),l=o[0],u=o[1];return{loading:n,request:Object(a.useCallback)(function(){var e=Object(d.a)(i.a.mark((function e(t){var n,a,c,o,l,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"GET",a=s.length>2&&void 0!==s[2]?s[2]:null,c=s.length>3&&void 0!==s[3]?s[3]:{},r(!0),e.prev=4,a&&(a=JSON.stringify(a),c["Content-Type"]="application/json"),e.next=8,fetch(t,{method:n,body:a,headers:c});case 8:return o=e.sent,e.next=11,o.json();case 11:if(l=e.sent,o.ok){e.next=14;break}throw new Error(l.message||"Error :: Backend connection");case 14:return r(!1),e.abrupt("return",l);case 18:throw e.prev=18,e.t0=e.catch(4),r(!1),u(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:l,clearError:Object(a.useCallback)((function(){return u(null)}),[])}},f=function(){var e=Object(u.g)(),t=Object(a.useContext)(g),n=Object(a.useState)([]),c=Object(p.a)(n,2),o=c[0],l=c[1],s=b(),m=(s.loading,s.request),f=(s.error,function(){var e=Object(d.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l([]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),h=function(){var e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("/api/articles","GET");case 3:t=e.sent,l(t.articles),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){h()}),[h]),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){t.logout(),e.push("/")},style:{float:"right"}},"Logout"),r.a.createElement("h2",null,"ArticlesPage"),r.a.createElement("button",{onClick:f},"Refresh"),r.a.createElement("br",null),0==o.length&&"Loading...",o.length>0&&o.map((function(e,t){return r.a.createElement("p",{key:t},e)})))},h=n(12),v=n(13),E=function(){var e=Object(a.useContext)(g),t=b(),n=(t.loading,t.request),c=(t.error,Object(a.useState)({login:"",password:""})),o=Object(p.a)(c,2),l=o[0],u=o[1],s=function(e){u(Object(v.a)(Object(v.a)({},l),{},Object(h.a)({},e.target.name,e.target.value)))},m=function(){var t=Object(d.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n("/api/signin","POST",Object(v.a)({},l));case 3:a=t.sent,e.login(a.token,a.userId),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h2",null,"HomePage"),r.a.createElement("div",{className:"form-content"},r.a.createElement("div",null,r.a.createElement("label",null,"Login: "),r.a.createElement("input",{placeholder:"Login",id:"login",type:"text",name:"login",value:l.login,onChange:s})),r.a.createElement("div",null,r.a.createElement("label",null,"Password:"),r.a.createElement("input",{placeholder:"Password",id:"password",type:"password",name:"password",value:l.password,onChange:s})),r.a.createElement("button",{disabled:0==l.login.length||0==l.password.length,onClick:m},"sign in")))};var O=function(){var e=function(){var e=Object(a.useState)(null),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),o=Object(p.a)(c,2),l=o[0],u=o[1],s=Object(a.useState)(null),i=Object(p.a)(s,2),d=i[0],m=i[1],g=Object(a.useCallback)((function(e,t){r(e),m(t),localStorage.setItem("userData",JSON.stringify({userId:t,token:e}))}),[]),b=Object(a.useCallback)((function(){r(null),m(null),localStorage.removeItem("userData")}),[]);return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&g(e.token,e.userId),u(!0)}),[g]),{login:g,logout:b,token:n,userId:d,ready:l}}(),t=e.token,n=e.login,c=e.logout,o=e.userId,s=(e.ready,!!t),i=function(e){return e?r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/articles",exact:!0},r.a.createElement(f,null)),r.a.createElement(u.a,{to:"/articles"})):r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",exact:!0},r.a.createElement(E,null)),r.a.createElement(u.a,{to:"/"}))}(s);return r.a.createElement(g.Provider,{value:{token:t,login:n,logout:c,userId:o,isAuthenticated:s}},r.a.createElement(l.a,null,r.a.createElement("div",{className:"container"},i)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.95b383b1.chunk.js.map